CREATE TABLE CICLISTA
(
	NOMBRE_CICLISTA VARCHAR2(20),
	FECHANAC DATE,
	NACIONALIDAD VARCHAR2(10),
	CONSTRAINT PK_CICLISTA PRIMARY KEY (NOMBRE_CICLISTA)
);

CREATE TABLE EQUIPO
(
	NOMBRE_EQUIPO VARCHAR2(20),
	CONSTRAINT PK_EQUIPO PRIMARY KEY (NOMBRE_EQUIPO)
);

CREATE TABLE PERTENECE
(
	NOMBRE_CICLISTA VARCHAR2(20),
	NOMBRE_EQUIPO VARCHAR2(20),
	CONSTRAINT PK_PERTENECE PRIMARY KEY (NOMBRE_CICLISTA,NOMBRE_EQUIPO),
	CONSTRAINT FK1_PERTENECE FOREIGN KEY (NOMBRE_CICLISTA) REFERENCES CICLISTA(NOMBRE_CICLISTA),
	CONSTRAINT FK2_PERTENECE FOREIGN KEY (NOMBRE_EQUIPO) REFERENCES EQUIPO(NOMBRE_EQUIPO)
);

CREATE TABLE PRUEBA
(
	NOMBRE_PRUEBA VARCHAR2(20),
	ANYO NUMBER(4),
	KM_TOTALES NUMBER(5),
	NOMBRE_CICLISTA_GANADOR VARCHAR2(20),
	CONSTRAINT PK_PRUEBA PRIMARY KEY (NOMBRE_PRUEBA),
	CONSTRAINT FK1_PRUEBA FOREIGN KEY (NOMBRE_CICLISTA_GANADOR) REFERENCES CICLISTA(NOMBRE_CICLISTA)
);


INSERT INTO EQUIPO
VALUES ('MOVISTAR');

INSERT INTO EQUIPO
VALUES ('JUMBO');

INSERT INTO EQUIPO
VALUES ('BORA');

INSERT INTO EQUIPO
VALUES ('UAE TEAM');


INSERT INTO CICLISTA
VALUES ('Alejandro Valverde', TO DATE('25/04/1980','DD/MM/YYYY'), 'Español');

INSERT INTO CICLISTA
VALUES ('Alejandra Valverde', TO DATE ('25/04/1980','DD/MM/YYYY'), 'Español');

INSERT INTO CICLISTA
VALUES ('Mathias Norsgaard', TO DATE ('01/05/1997','DD/MM/YYYY'), 'Danés');

INSERT INTO CICLISTA
VALUES ('Primox Roglic', TO DATE ('01/01/1997','DD/MM/YYYY'), 'Esloveno');

INSERT INTO CICLISTA
VALUES ('R. Gesink', TO DATE ('01/05/2003','DD/MM/YYYY'), 'Holandés');

INSERT INTO CICLISTA
VALUES ('S. Bennett', TO DATE ('03/08/2000','DD/MM/YYYY'), 'Irlandés');

INSERT INTO CICLISTA
VALUES ('M. Soler', TO DATE ('09/11/2003','DD/MM/YYYY'), 'Español');

INSERT INTO PERTENECE
VALUES ('Alejandro Valverde', 'MOVISTAR');

INSERT INTO PERTENECE
VALUES ('Alejandra Valverde', 'MOVISTAR');

INSERT INTO PERTENECE
VALUES ('Mathias Norsgaard', 'MOVISTAR');

INSERT INTO PERTENECE
VALUES ('Primox Roglic', 'JUMBO');

INSERT INTO PERTENECE
VALUES ('R. Gesink', 'JUMBO');

INSERT INTO PERTENECE
VALUES ('S. Bennett', 'BORA');

INSERT INTO PERTENECE
VALUES ('M. Soler', 'UAE TEAM');

INSERT INTO PRUEBA
VALUES ('E1_2022', 2022, 23, 'R. Gesink');

INSERT INTO PRUEBA
VALUES ('E2_2022', 2022, 175, 'Primox Roglic');

INSERT INTO PRUEBA
VALUES ('E3_2022', 2022, 193, 'S. Bennett');

INSERT INTO PRUEBA
VALUES ('E1_2021', 2021, 154, 'S. Bennett');

INSERT INTO PRUEBA
VALUES ('E1_2021', 2021, 189, 'M. Soler');/*ESTE INSERT VA A DAR ERROR PORQUE TIENE LA MISMA PRIMARY KEY QUE EL DE ARRIBA*/

INSERT INTO PRUEBA
VALUES ('E1_2020', 2020, 40, 'Alejandro Valverde');

UPDATE PRUEBA
SET NOMBRE_PRUEBA='CONTRARRELOJ_2022'
WHERE KM_TOTALES<100 AND ANYO=2022;

UPDATE PRUEBA
SET NOMBRE_PRUEBA='CONTRARRELOJ_2020'
WHERE KM_TOTALES<100 AND ANYO=2020;

CREATE TABLE CICLISTAS_ESPANYOLES
(
	NOMBRE_CICLISTA VARCHAR2(20),
	FECHANAC DATE,
	NACIONALIDAD VARCHAR2(10),
	CONSTRAINT PK_CICLISTAS_ESPANYOLES PRIMARY KEY (NOMBRE_CICLISTA)
);

INSERT INTO CICLISTAS_ESPANYOLES
SELECT NOMBRE_CICLISTA, FECHANAC, NACIONALIDAD
FROM CICLISTA
WHERE NACIONALIDAD LIKE 'Español';





